% ..:: Page geometry ::..

\usepackage{geometry}

\ExplSyntaxOn
\tl_set:Nn \l_sidemargin_dim {1.5cm}
\tl_set:Nn \l_topmargin_dim {2.2cm}
\tl_set:Nn \l_botmargin_dim {1.6cm}
\tl_set:Nn \l_footmargin_dim {6mm}
\tl_set:Nn \l_columnsep_dim {3mm}
\geometry{
  papersize={200mm,273mm},
  twocolumn,
  left=\tl_use:N \l_sidemargin_dim,
  right=\tl_use:N \l_sidemargin_dim,
  top=\tl_use:N \l_topmargin_dim,
  bottom=\tl_use:N \l_botmargin_dim,
  footskip=\tl_use:N \l_footmargin_dim,
  columnsep=\tl_use:N \l_columnsep_dim
}
\ExplSyntaxOff

% ..:: Section titles ::..

\usepackage{helvet}
\titleformat{\section}{%
  \normalfont\fontsize{10}{12}%
  \sffamily\bfseries\uppercase}{}{0cm}{#1}
\titlespacing*{\section}{0cm}{4mm}{0mm}

\titleformat{\subsection}{%
  \normalfont\fontsize{10}{12}%
  \sffamily\bfseries\slshape}{}{0cm}{#1}
\titlespacing*{\subsection}{0cm}{4mm}{0mm}

% ..:: Header and footer ::..

\usepackage{fontawesome}

\ExplSyntaxOn
\tl_new:N \l_csm_date
\tl_set:Nn \l_csm_date {}

\newcommand{\csmdate}[1]{
  \tl_set:Nn \l_csm_date {#1}
}

\fancypagestyle{csmfancy}{%
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[LO]{%
    \sffamily%
    \fontsize{9}{11}%
    \textbf{\thepage}~~%
    \fontsize{6}{8}%
    \textbf{IEEE~CONTROL~SYSTEMS}~~%
    \tikz[outer~sep=0,inner~sep=0]{%
      \node[scale=0.8] at (0,0) {\faChevronRight};%
      \node[scale=0.8] at (0.4em,0) {\faChevronRight};}%
    {\normalfont\sffamily{}~\tl_use:N \l_csm_date}%
  }%
  \fancyfoot[RE]{%
    \fontsize{6}{8}%
    \sffamily%
    {\tl_use:N \l_csm_date}~%
    \tikz[outer~sep=0,inner~sep=0]{%
      \node[scale=0.8] at (0,0) {\faChevronLeft};%
      \node[scale=0.8] at (0.4em,0) {\faChevronLeft};}%
    \textbf{~IEEE~CONTROL~SYSTEMS}%
    \fontsize{9}{11}%
    \textbf{~~\thepage}%
  }%
}
\pagestyle{csmfancy}
\ExplSyntaxOff

% ..:: Equations ::..

\allowdisplaybreaks

% ..:: Figures ::..

\ExplSyntaxOn

\cs_set:Npn \csm_print_fig:n #1 {%
  Figure~\ref{#1}%
}
\newcommand{\csmfigref}[1]{\csm_print_fig:n {#1}}

\tl_new:N \end_fig_type

\makeatletter

% Generic n-column figure
\newenvironment{csmfigure@internal}[2][]{
  \tl_set:Nn \end_fig_type {\end{#2}}
\begin{#2}[#1]
}{
  \tl_use:N \end_fig_type
}

% One-column figure
\newenvironment{csmfigure}[1][]{
  \begin{csmfigure@internal}[#1]{figure}
  }{
  \end{csmfigure@internal}
}

% Two-column figure
\newenvironment{csmfigure*}[1][]{
  \begin{csmfigure@internal}[#1]{figure*}
  }{
  \end{csmfigure@internal}
}

% Subfigure
\newenvironment{csmsubfigure}[2][]{
  \begin{subfigure}[#1]{#2}
  }{
  \end{subfigure}
}

\makeatother

\ExplSyntaxOff

% ..:: Sidebars ::..

\newcommand{\csmsbref}[1]{``TODO''}

% ..:: Bibliography ::..

\renewcommand{\bibsection}{}
\renewcommand*{\bibfont}{\footnotesize}
\setlength{\bibsep}{0.0pt}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End:
